- hosts: webservers
  handlers:
    - import_tasks: "roles/common/handlers/main.yml"
  roles:
    - role: "common"
    - role: "1password"
    - role: "authelia"
    - role: "dashy"
    - role: "davfs2"
    - role: "docker"
    - role: "email"
    - role: "fail2ban"
    - role: "promtail"
    - role: "grafana"
    - role: "homedir"
    - role: "letsencrypt"
    - role: "munin"
    - role: "nginx"
    - role: "nix"
    - role: "postgres"
    - role: "postgres_backup"
    - role: "node-exporter"
    - role: "selfoss"
    - role: "sshd"
    - role: "systemd"
    - role: "ufw"
    - role: "unattended_upgrades"
    - role: "gitea"
    - role: "bracket"
    - role: "wireguard"

- hosts: dev_machines
  handlers:
    - import_tasks: "roles/common/handlers/main.yml"
  roles:
    - role: "common"
    - role: "homedir"
    - role: "unattended_upgrades"

- hosts: pis
  handlers:
    - import_tasks: "roles/common/handlers/main.yml"
  roles:
    - role: "common"
    - role: "adsb"
    - role: "email"
    - role: "fail2ban"
    - role: "promtail"
    - role: "node-exporter"
    - role: "homedir"
    - role: "sshd"
    - role: "ufw"
    - role: "unattended_upgrades"
